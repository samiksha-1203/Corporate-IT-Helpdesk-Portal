{% extends 'base.html' %}

{% block content %}
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="page-header">
        <h1 class="page-title">SLA Alerts</h1>
        <form method="post" class="autofill-form" style="margin-left:auto;">
          {% csrf_token %}
          <input type="hidden" name="autofill" value="1">
          <button type="submit" class="btn btn-primary">
            Auto-set SLA dates{% if missing_count %} ({{ missing_count }}){% endif %}
          </button>
        </form>
      </div>
      {% if sla_alerts %}
      <div class="alerts-list">
        {% for alert in sla_alerts %}
        <a href="{% url 'ticket_detail' alert.ticket_pk %}" class="sla-alert-item {% if alert.critical %}critical{% endif %}">
          <div class="icon">
            <i class="fas {% if alert.critical %}fa-exclamation-triangle{% else %}fa-clock{% endif %}"></i>
          </div>
          <div class="content">
            <div class="title">{{ alert.title }}</div>
            <div class="desc">{{ alert.description }}</div>
          </div>
          <div class="cta">View â†’</div>
        </a>
        {% endfor %}
      </div>
      {% else %}
      <div class="empty-state">
        <i class="far fa-check-circle"></i>
        <p>No SLA alerts at the moment.</p>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<style>
.page-header { display:flex; align-items:center; gap:12px; }
.page-title { font-size: 24px; font-weight: 600; margin: 10px 0 20px; }
.btn.btn-primary { background:#7C3AED; color:#fff; border:none; border-radius:8px; padding:8px 12px; cursor:pointer; }
.btn.btn-primary:hover { background:#6D28D9; }
.alerts-list { display: flex; flex-direction: column; gap: 10px; }
.sla-alert-item { display: flex; align-items: center; gap: 16px; padding: 12px 14px; border-radius: 10px; text-decoration: none; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.06); color: inherit; }
.sla-alert-item .icon { width: 36px; height: 36px; display:flex; align-items:center; justify-content:center; border-radius: 8px; background: #f1f5f9; color:#6b7280; }
.sla-alert-item.critical .icon { background:#FEF3F2; color:#DC2626; }
.sla-alert-item .content .title { font-weight:600; }
.sla-alert-item .content .desc { font-size: 13px; color:#6b7280; }
.sla-alert-item .cta { margin-left:auto; color:#7C3AED; font-weight:600; }
.empty-state { display:flex; align-items:center; gap:10px; padding:12px; color:#6b7280; }
</style>
{% endblock %}
